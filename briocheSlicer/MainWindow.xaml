<Window x:Class="briocheSlicer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Helix="clr-namespace:HelixToolkit.Wpf;assembly=HelixToolkit.Wpf"
        Title="Brioche-slicer" Height="900" Width="1600">
    <DockPanel>
        <ToolBar DockPanel.Dock="Top">
            <Button Content="Open STL..." Click="OpenStl_Click" />
            <Separator/>

            <!-- Layer Height Input -->
            <TextBlock Text="Layer Height (mm):" VerticalAlignment="Center" Margin="5,0"/>
            <TextBox x:Name="LayerHeightTextBox" 
                Width="60" 
                Text="0.2" 
                VerticalContentAlignment="Center"
                ToolTip="Layer height in millimeters"/>
            <Separator/>
            
            <!-- Nozzle Diameter Input -->
            <TextBlock Text="Nozzle Diameter (mm):" VerticalAlignment="Center" Margin="5,0"/>
            <TextBox x:Name="NozzleDiameterTextBox" 
                Width="60" 
                Text="0.4" 
                VerticalContentAlignment="Center"
                ToolTip="Nozzle diameter in millimeters"/>
            <Separator/>

            <!-- Slice Button -->
            <Button Content="Slice" 
                Click="Slice_Click" 
                x:Name="SliceButton"
                IsEnabled="False"
                Padding="10,3"
                ToolTip="Slice the model with current settings"/>

        </ToolBar>

        <!-- Slider panel on the right -->
        <Border DockPanel.Dock="Right" Width="80" Background="#F0F0F0" Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="Slice Height" 
                   HorizontalAlignment="Center" 
                   FontWeight="Bold" Margin="0,0,0,10"/>

                <Slider Grid.Row="1" 
                x:Name="SliceHeightSlider"
                Orientation="Vertical"
                Minimum="0" 
                Maximum="100"
                Value="50"
                TickFrequency="10"
                IsSnapToTickEnabled="False"
                TickPlacement="BottomRight"
                ValueChanged="SliceHeightSlider_ValueChanged"
                IsEnabled="False"/>

                <TextBlock Grid.Row="2" 
                   x:Name="SliceHeightText"
                   Text="--" 
                   HorizontalAlignment="Center"
                   Margin="0,10,0,0"/>
            </Grid>
        </Border>

        <!-- Center area: split into 2 columns: 3D (left) + 2D Slice View (right) -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--Helix scene view. Allow drag and drop and define event handler-->
            <Helix:HelixViewport3D Grid.Column="0" ZoomExtentsWhenLoaded="True" x:Name="View" AllowDrop="True" Drop="View_Drop">
                <Helix:SunLight/>
                <ModelVisual3D x:Name="scene" />
            </Helix:HelixViewport3D>

            <!-- 2D slice view -->
            <Border Grid.Column="1" Background="#0D0D0D" Margin="8" CornerRadius="8">
                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                    <Canvas x:Name="SliceCanvas" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MinHeight="200" MinWidth="200" Background="#111"/>
                </ScrollViewer>
            </Border>
        </Grid>

    </DockPanel>
</Window>
